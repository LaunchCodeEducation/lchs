<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>25.5. Home Page Logic &#8212; LaunchCode&#39;s LCHS  documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/launchcode.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/site.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="25.6. Database Functions" href="db-logic.html" />
    <link rel="prev" title="25.4. Create the Game Page" href="game-page.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>

  </head><body class="body-bc">

<div id="navbar" class="navbar navbar-default navbar-fixed-top">
   <div class="container">
     <div class="navbar-header">
       <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
       <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
       </button>
       <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
       </a>
       <span class="navbar-text navbar-version pull-left"><b></b></span>
     </div>

       <div class="collapse navbar-collapse nav-collapse">
         <ul class="nav navbar-nav">
           
           
             
           
           
           
           
           
         </ul>

         
           
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
         
       </div>
   </div>
 </div>

<ol class="breadcrumb container">
    <li><a href="../../index.html">Contents</a></li>
    <li><a href="index.html"><span class="section-number">25. </span>Build a Minesweeper Game</a></li>
    <li class="active"><span class="section-number">25.5. </span>Home Page Logic</li>
</ol>



<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1 content " role="main">

    
  <div class="section" id="home-page-logic">
<h1><span class="section-number">25.5. </span>Home Page Logic<a class="headerlink" href="#home-page-logic" title="Permalink to this headline">¶</a></h1>
<p>Now that we have our HTML templates ready, it’s time to add some Python to get
the game running.</p>
<div class="section" id="the-index-function">
<h2><span class="section-number">25.5.1. </span>The <code class="docutils literal notranslate"><span class="pre">index()</span></code> Function<a class="headerlink" href="#the-index-function" title="Permalink to this headline">¶</a></h2>
<p>The home page for our application is controlled by the <code class="docutils literal notranslate"><span class="pre">index()</span></code> function in
<code class="docutils literal notranslate"><span class="pre">main.py</span></code>. It serves several purposes:</p>
<ol class="arabic simple">
<li><p>To clear existing data in preparation for a new game,</p></li>
<li><p>To process the <code class="docutils literal notranslate"><span class="pre">Main</span> <span class="pre">Menu</span></code> form submission,</p></li>
<li><p>To hide a new batch of mines on the board,</p></li>
<li><p>To redirect a player to the URL where they will play the game.</p></li>
</ol>
<p>To complete your <code class="docutils literal notranslate"><span class="pre">index()</span></code> function, open your Minesweeper project and code
along with the video:</p>
<section class="vid_box">
   <iframe class="vid" src="https://www.youtube-nocookie.com/embed/GcBSzNl670I" frameborder="1" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</section></div>
<div class="section" id="video-summary">
<h2><span class="section-number">25.5.2. </span>Video Summary<a class="headerlink" href="#video-summary" title="Permalink to this headline">¶</a></h2>
<p>Remember, this summary is NOT intended to replace the video walkthrough! The
notes give you information about the ideas explained in the clip. To see the
specific Python code and hear the logic behind it, you need to watch the movie.</p>
<ol class="arabic">
<li><p>Two helper functions have already been written for you. The
<code class="docutils literal notranslate"><span class="pre">reset_board()</span></code> and <code class="docutils literal notranslate"><span class="pre">place_mines()</span></code> functions can be found in the
<code class="docutils literal notranslate"><span class="pre">game_logic.py</span></code> file. Line 2 in <code class="docutils literal notranslate"><span class="pre">main.py</span></code> imports these functions from
that module.</p></li>
<li><p>Use a conditional to break the <code class="docutils literal notranslate"><span class="pre">index()</span></code> function into two parts. One part
deals with the form submission (a <code class="docutils literal notranslate"><span class="pre">POST</span></code> request), and the other resets
the board after a <code class="docutils literal notranslate"><span class="pre">GET</span></code> request.</p></li>
<li><p>After a <code class="docutils literal notranslate"><span class="pre">POST</span></code> request, use <code class="docutils literal notranslate"><span class="pre">request.form[]</span></code> to collect data from the
<em>Main Menu</em> form. This will be the number of mines the user wants to hide.</p>
<ol class="loweralpha simple">
<li><p>Add some server-side validation to deal with invalid form submissions
(e.g. submitting and empty field, or letters, or symbols, etc.).</p></li>
<li><p>For invalid form submissions, set the number of mines to some default
value, like <code class="docutils literal notranslate"><span class="pre">10</span></code>.</p></li>
<li><p>For now, don’t worry about checking if the number of mines is within
5 - 25. You can return to this idea <a class="reference internal" href="extras.html#game-refinements"><span class="std std-ref">later</span></a>.</p></li>
</ol>
</li>
<li><p>Save the number of mines to the session cookie. Make sure the value is the
<code class="docutils literal notranslate"><span class="pre">int</span></code> data type.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">session</span><span class="p">[</span><span class="s1">&#39;num_mines&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">number_submitted_from_form</span>
</pre></div>
</div>
</li>
<li><p>After validating the number of mines, call the <code class="docutils literal notranslate"><span class="pre">place_mines()</span></code> function.
Include the number of mines as the argument, and save the returned list to
<code class="docutils literal notranslate"><span class="pre">session['mines']</span></code>.</p></li>
<li><p>Finally, use the <code class="docutils literal notranslate"><span class="pre">redirect()</span></code> function to send the user to the <code class="docutils literal notranslate"><span class="pre">/play</span></code>
route.</p></li>
</ol>
</div>
</div>



    
    <nav aria-label="Next and Previous Pages">
      <ul class="pager">
        
        <li class="previous"><a href="game-page.html"><span aria-hidden="true">&larr;</span> <span class="section-number">25.4. </span>Create the Game Page</a></li>
        
        
        <li class="next"><a href="db-logic.html"><span class="section-number">25.6. </span>Database Functions <span aria-hidden="true">&rarr;</span></a></li>
        
      </ul>
    </nav>
    
    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../../_sources/chapters/databases-part2/home-logic.rst.txt"
     rel="nofollow">Page Source</a>
</div>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>