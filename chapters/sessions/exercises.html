<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>23.7. Exercises: Flask Sessions &#8212; LaunchCode&#39;s LCHS  documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/launchcode.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/site.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="23.8. Project: Flask Sessions" href="project.html" />
    <link rel="prev" title="23.6. Try It! Flask Sessions (Part 2)" href="try-it-part2.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>

  </head><body class="body-bc">

<div id="navbar" class="navbar navbar-default navbar-fixed-top">
   <div class="container">
     <div class="navbar-header">
       <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
       <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
       </button>
       <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
       </a>
       <span class="navbar-text navbar-version pull-left"><b></b></span>
     </div>

       <div class="collapse navbar-collapse nav-collapse">
         <ul class="nav navbar-nav">
           
           
             
           
           
           
           
           
         </ul>

         
           
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
         
       </div>
   </div>
 </div>

<ol class="breadcrumb container">
    <li><a href="../../index.html">Contents</a></li>
    <li><a href="index.html"><span class="section-number">23. </span>Cookies &amp; Sessions</a></li>
    <li class="active"><span class="section-number">23.7. </span>Exercises: Flask Sessions</li>
</ol>



<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1 content " role="main">

    
  <div class="section" id="exercises-flask-sessions">
<h1><span class="section-number">23.7. </span>Exercises: Flask Sessions<a class="headerlink" href="#exercises-flask-sessions" title="Permalink to this headline">¶</a></h1>
<p>In these exercises you will build a Flask app that uses sessions to run a
number guessing game.</p>
<div class="section" id="part-a-clone-the-repository">
<h2><span class="section-number">23.7.1. </span>Part A: Clone the Repository<a class="headerlink" href="#part-a-clone-the-repository" title="Permalink to this headline">¶</a></h2>
<p>To save you some time, clone the starter code from this
<a class="reference external" href="https://github.com/LaunchCodeEducation/LCHS_session_exercises" target="_blank">GitHub repository<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>.</p>
<ol class="arabic">
<li><p>Follow the same steps you used <a class="reference internal" href="try-it-sessions.html#clone-venv-reminder"><span class="std std-ref">earlier in this chapter</span></a>
to download the project files, create a new virtual environment, install
Flask, and commit your changes.</p>
<div class="admonition-note admonition">
<p class="admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p>In the <a class="reference internal" href="../more-flask/chapter-setup.html#create-gitignore"><span class="std std-ref">.gitignore file</span></a>. Be sure to replace the
entry in line 1 with the name of <em>your</em> new virtual environment.</p>
</div>
</li>
<li><p>When ready, the project file tree should look something like this:</p>
<div class="figure align-default" id="id1">
<img alt="File structure for the session exercises starter code." src="../../_images/session-exercises-file-tree.png" />
<p class="caption"><span class="caption-text">The name you gave to your virtual environment will appear instead of <code class="docutils literal notranslate"><span class="pre">session-env</span></code>.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
</li>
<li><p>Launch <code class="docutils literal notranslate"><span class="pre">main.py</span></code>, and open the Flask app in a browser tab. You should see
a plain looking web form.</p>
<div class="figure align-default" id="id2">
<a class="reference internal image-reference" href="../../_images/exercises-start2.png"><img alt="A web form for entering numerical guesses." src="../../_images/exercises-start2.png" style="width: 80%;" /></a>
<p class="caption"><span class="caption-text">The <code class="docutils literal notranslate"><span class="pre">index.html</span></code> page rendered by the starter code.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</li>
</ol>
</div>
<div class="section" id="part-b-set-the-numbers">
<h2><span class="section-number">23.7.2. </span>Part B: Set the Numbers<a class="headerlink" href="#part-b-set-the-numbers" title="Permalink to this headline">¶</a></h2>
<p>Your first task is to save three numbers to the <code class="docutils literal notranslate"><span class="pre">session</span></code> object: the
<code class="docutils literal notranslate"><span class="pre">magic_number</span></code> players need to guess, and the high and low values for the
guessing range.</p>
<ol class="arabic">
<li><p>Open <code class="docutils literal notranslate"><span class="pre">main.py</span></code> in Visual Studio Code. Notice that variables for
<code class="docutils literal notranslate"><span class="pre">low_value</span></code>, <code class="docutils literal notranslate"><span class="pre">high_value</span></code>, and <code class="docutils literal notranslate"><span class="pre">magic_number</span></code> are already set.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">low_value</span> <span class="o">=</span> <span class="mi">1</span>     <span class="c1"># Sets the low end of the guessing range.</span>
<span class="n">high_value</span> <span class="o">=</span> <span class="mi">50</span>   <span class="c1"># Sets the high end of the guessing range.</span>
<span class="n">magic_number</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low_value</span><span class="p">,</span> <span class="n">high_value</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Line 15 randomly selects an integer from within the range and assigns it to
the <code class="docutils literal notranslate"><span class="pre">magic_number</span></code> variable.</p>
</li>
<li><p>Refactor line 15 to save the random integer to the <code class="docutils literal notranslate"><span class="pre">session</span></code> object.
Use <code class="docutils literal notranslate"><span class="pre">magic_number</span></code> as the key.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">session</span><span class="p">[</span><span class="s1">&#39;magic_number&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low_value</span><span class="p">,</span> <span class="n">high_value</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</li>
<li><p>On lines 16 and 17, save the low and high values to the session object.
Remember to use descriptive key names!</p></li>
</ol>
<p>By storing the three numbers in the session, you do NOT need to pass the values
to <code class="docutils literal notranslate"><span class="pre">index.html</span></code> from the <code class="docutils literal notranslate"><span class="pre">render_template()</span></code> function.</p>
<div class="section" id="display-the-number-range">
<h3><span class="section-number">23.7.2.1. </span>Display the Number Range<a class="headerlink" href="#display-the-number-range" title="Permalink to this headline">¶</a></h3>
<p>Open the <code class="docutils literal notranslate"><span class="pre">index.html</span></code> file. Notice that the label for the input box always
displays the same text, <code class="docutils literal notranslate"><span class="pre">Guess</span> <span class="pre">a</span> <span class="pre">number</span> <span class="pre">between</span> <span class="pre">1</span> <span class="pre">and</span> <span class="pre">100</span></code>.</p>
<ol class="arabic simple">
<li><p>Replace the <code class="docutils literal notranslate"><span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">100</span></code> with placeholders. Inside each set of braces,
use the session object to access the low and high ends of the guessing
range.</p></li>
<li><p>Save the changes, then reload the webpage. Does the label now show a
range from 1 to 50? If not, adjust your placeholder syntax until it does.</p></li>
<li><p>Return to <code class="docutils literal notranslate"><span class="pre">main.py</span></code> and change the numbers assigned to <code class="docutils literal notranslate"><span class="pre">low_value</span></code> and
<code class="docutils literal notranslate"><span class="pre">high_value</span></code>. After saving, reload the webpage. The input box label should
change to match your new numbers.</p></li>
<li><p>When your page correctly displays the numbers saved to the session, stop the
program and commit your code. You’re ready to move on.</p></li>
</ol>
<div class="admonition-tip admonition">
<p class="admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p>Did you change the <code class="docutils literal notranslate"><span class="pre">Form</span> <span class="pre">title</span> <span class="pre">goes</span> <span class="pre">here</span></code> text? You weren’t given any
instructions to do so. However, at this point in the class, we shouldn’t
need to tell you how to fix every minor thing!</p>
</div>
</div>
</div>
<div class="section" id="part-c-check-user-guesses">
<h2><span class="section-number">23.7.3. </span>Part C: Check User Guesses<a class="headerlink" href="#part-c-check-user-guesses" title="Permalink to this headline">¶</a></h2>
<p>In <code class="docutils literal notranslate"><span class="pre">main.py</span></code>, replace the <code class="docutils literal notranslate"><span class="pre">pass</span></code> keyword on line 11 with code that deals
with a user’s guess.</p>
<p>Your code should:</p>
<ol class="arabic">
<li><p>Collect the user’s guess from the form and convert it to an integer. Note
that in <code class="docutils literal notranslate"><span class="pre">index.html</span></code>, the <code class="docutils literal notranslate"><span class="pre">input</span></code> tag contains the attribute
<code class="docutils literal notranslate"><span class="pre">name=&quot;guess&quot;</span></code>.</p></li>
<li><p>Access the low, high, and magic number values from the session as needed.</p></li>
<li><p>Check if the guess is within the required range. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, reload the
form and display an error message. This should appear instead of the
<code class="docutils literal notranslate"><span class="pre">Feedback</span> <span class="pre">messages</span> <span class="pre">will</span> <span class="pre">go</span> <span class="pre">here</span></code> text.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, compare the user’s guess to <code class="docutils literal notranslate"><span class="pre">magic_number</span></code>.</p>
<ol class="loweralpha simple">
<li><p>If the guess is too low, reload the form with the proper feedback
message.</p></li>
<li><p>If the guess is too high, reload the form with the opposite feedback
message.</p></li>
<li><p>If the guess is correct, reload the page with a victory message!</p></li>
</ol>
</li>
<li><p>When the user’s guess is less than the magic number, reassign the low value
stored in the session. This should update the input label on the form.</p>
<p>When the guess it too high, reassign the top value stored in the session.</p>
</li>
</ol>
<p>When done, your app should behave like this:</p>
<div class="figure align-default" id="id3">
<img alt="GIF showing the operation of the Flask number guessing app." src="../../_images/number-guess.gif" />
<p class="caption"><span class="caption-text">Wow! Three tries (not counting invalid entries).</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>Take a moment to save and commit your work!</p>
</div>
<div class="section" id="part-d-finalize-form">
<h2><span class="section-number">23.7.4. </span>Part D: Finalize Form<a class="headerlink" href="#part-d-finalize-form" title="Permalink to this headline">¶</a></h2>
<p>After the user guesses the correct number, what then? Obviously, the
application should not keep taking guesses!</p>
<ol class="arabic">
<li><p>In <code class="docutils literal notranslate"><span class="pre">main.py</span></code> create a session variable called <code class="docutils literal notranslate"><span class="pre">still_guessing</span></code>.</p></li>
<li><p>Initially, <code class="docutils literal notranslate"><span class="pre">still_guessing</span></code> should be <code class="docutils literal notranslate"><span class="pre">True</span></code>. However, when the user
guesses correctly, the value should flip to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p>Add some Jinja3 logic to the <code class="docutils literal notranslate"><span class="pre">index.html</span></code> template. If <code class="docutils literal notranslate"><span class="pre">still_guessing</span></code>
is <code class="docutils literal notranslate"><span class="pre">True</span></code>, display the original form. When <code class="docutils literal notranslate"><span class="pre">False</span></code>, display a different
form.</p></li>
<li><p>The second form should contain a single <code class="docutils literal notranslate"><span class="pre">Play</span> <span class="pre">Again</span></code> button. When clicked,
the page sends a <code class="docutils literal notranslate"><span class="pre">GET</span></code> request to the server. This will reset the guessing
range and assign a new <code class="docutils literal notranslate"><span class="pre">magic_number</span></code> value.</p>
<div class="figure align-default" id="id4">
<a class="reference internal image-reference" href="../../_images/success-screen.png"><img alt="Form showing a Play Again button above a celebratory message." src="../../_images/success-screen.png" style="width: 80%;" /></a>
<p class="caption"><span class="caption-text">Clicking <code class="docutils literal notranslate"><span class="pre">Play</span> <span class="pre">Again</span></code> resets the game with a new magic number.</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
</li>
</ol>
<p>Don’t forget to save and commit your work!</p>
</div>
<div class="section" id="part-e-optional-updates">
<h2><span class="section-number">23.7.5. </span>Part E: Optional Updates<a class="headerlink" href="#part-e-optional-updates" title="Permalink to this headline">¶</a></h2>
<p>Your Flask app now functions as a simple number guessing game. However, this
doesn’t mean the project is completely finished! There are a number of
improvements you can make to practice the skills you learned earlier in this
course.</p>
<p>Feel free to try some of these:</p>
<ol class="arabic simple">
<li><p>Use CSS to make the form, feedback messages, etc. nice to look at.</p></li>
<li><p>Add a counter to keep track of how many tries it takes to guess the correct
number.</p></li>
<li><p>Add a <code class="docutils literal notranslate"><span class="pre">Start</span> <span class="pre">Over</span></code> option to let users reset the game before they guess
correctly.</p></li>
<li><p>Randomly select the high and low values for the guessing range.</p></li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">main.py</span></code>, add some <a class="reference internal" href="../flask-intro/validation.html#server-side-validation"><span class="std std-ref">server-side validation</span></a>
to make sure the user submits an integer.</p></li>
<li><p>Convert the game to rock-paper-scissors!</p></li>
</ol>
</div>
</div>



    
    <nav aria-label="Next and Previous Pages">
      <ul class="pager">
        
        <li class="previous"><a href="try-it-part2.html"><span aria-hidden="true">&larr;</span> <span class="section-number">23.6. </span>Try It! Flask Sessions (Part 2)</a></li>
        
        
        <li class="next"><a href="project.html"><span class="section-number">23.8. </span>Project: Flask Sessions <span aria-hidden="true">&rarr;</span></a></li>
        
      </ul>
    </nav>
    
    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../../_sources/chapters/sessions/exercises.rst.txt"
     rel="nofollow">Page Source</a>
</div>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>