<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>21.3. Your First Flask App &#8212; LaunchCode&#39;s LCHS  documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/launchcode.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/site.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="21.4. Routes" href="routes.html" />
    <link rel="prev" title="21.2. Install Flask" href="install-flask.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>

  </head><body class="body-bc">

<div id="navbar" class="navbar navbar-default navbar-fixed-top">
   <div class="container">
     <div class="navbar-header">
       <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
       <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
       </button>
       <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
       </a>
       <span class="navbar-text navbar-version pull-left"><b></b></span>
     </div>

       <div class="collapse navbar-collapse nav-collapse">
         <ul class="nav navbar-nav">
           
           
             
           
           
           
           
           
         </ul>

         
           
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
         
       </div>
   </div>
 </div>

<ol class="breadcrumb container">
    <li><a href="../../index.html">Contents</a></li>
    <li><a href="index.html"><span class="section-number">21. </span>Hello, Flask!</a></li>
    <li class="active"><span class="section-number">21.3. </span>Your First Flask App</li>
</ol>



<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1 content " role="main">

    
  <div class="section" id="your-first-flask-app">
<span id="first-flask"></span><h1><span class="section-number">21.3. </span>Your First Flask App<a class="headerlink" href="#your-first-flask-app" title="Permalink to this headline">¶</a></h1>
<p>A Flask application is just a Python program that uses some specific tools. To
use these resources, we must first import them. We also need to learn some new
syntax and organize our code in a very specific way.</p>
<div class="section" id="initial-code">
<h2><span class="section-number">21.3.1. </span>Initial Code<a class="headerlink" href="#initial-code" title="Permalink to this headline">¶</a></h2>
<p>In the <code class="docutils literal notranslate"><span class="pre">hello_flask</span></code> directory, create a new Python file called <code class="docutils literal notranslate"><span class="pre">hello.py</span></code>.
Next, paste this code into the file, then save. We’ll discuss what each line
does in a moment.</p>
<div class="highlight-Python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
   <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Hello, Flask!&quot;</span>
   <span class="k">return</span> <span class="n">message</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
   <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p id="index-0">Here is the breakdown for the code:</p>
<ol class="arabic simple">
<li><strong>Line 1</strong>: This imports the <code class="docutils literal notranslate"><span class="pre">Flask</span></code> class from the <code class="docutils literal notranslate"><span class="pre">flask</span></code> module.</li>
<li><strong>Line 3</strong>: A lot of work goes on behind the scenes when this statement
runs.<ol class="loweralpha">
<li>It creates an object called <code class="docutils literal notranslate"><span class="pre">app</span></code> from the <code class="docutils literal notranslate"><span class="pre">Flask</span></code> class. We will use
the object’s methods to control the flow of data between the Python code
and our webpages.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">__name__</span></code> argument tells Flask where to find any other files we
create for our program.</li>
</ol>
</li>
<li><strong>Line 4</strong>: Turns on a debugging mode. This allows us to update our Python
code and see the results while the program is running.</li>
<li><strong>Line 6</strong>: <code class="docutils literal notranslate"><span class="pre">&#64;app.route()</span></code> is called a <strong>decorator</strong>. This links a
function to a particular URL. When the user visits that URL in their
browser, it triggers the function. We will take a closer look at this on the
next page.</li>
<li><strong>Lines 7 - 9</strong>: The <code class="docutils literal notranslate"><span class="pre">hello()</span></code> function returns the <code class="docutils literal notranslate"><span class="pre">message</span></code> string we
want to display in the browser.</li>
<li><strong>Lines 11 - 12</strong>: Checks to make sure the Python file is being run as the
main program instead of a module. If the condition is <code class="docutils literal notranslate"><span class="pre">True</span></code>, then
<code class="docutils literal notranslate"><span class="pre">app.run()</span></code> executes and starts our Flask application.</li>
</ol>
<div class="admonition-note admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p>If you are using Replit create a new python repl and change lines 11 -12 to:</p>
<div class="last highlight-Python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
   <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
      <span class="n">host</span> <span class="o">=</span> <span class="s1">&#39;0.0.0.0&#39;</span><span class="p">,</span>
      <span class="n">port</span> <span class="o">=</span> <span class="mi">8080</span>
   <span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="launch-the-app">
<h2><span class="section-number">21.3.2. </span>Launch the App<a class="headerlink" href="#launch-the-app" title="Permalink to this headline">¶</a></h2>
<p>The code above is a very small, but still functional, web application. Our next
step is to launch it and see what it looks like in a browser.</p>
<p>To start a Flask application, we follow three basic steps:</p>
<ol class="arabic simple">
<li>Activate the virtual environment,</li>
<li>Launch a Python/Flask program,</li>
<li>Open a web browser and navigate to a specific IP address.</li>
</ol>
<div class="admonition-try-it admonition">
<p class="first admonition-title"><i class="fas fa-puzzle-piece" aria-hidden="true"></i>Try It!</p>
<p>Make sure you are in the <code class="docutils literal notranslate"><span class="pre">hello_flask</span></code> directory first. Then:</p>
<ol class="arabic">
<li><p class="first">In the terminal, activate the virtual environment with the command
<code class="docutils literal notranslate"><span class="pre">.</span> <span class="pre">hello-env/bin/activate</span></code> on a Mac, or <code class="docutils literal notranslate"><span class="pre">.</span> <span class="pre">hello-env/Scripts/activate</span></code>
on Windows. You should see <code class="docutils literal notranslate"><span class="pre">(hello-env)</span></code> appear before the terminal
prompt.</p>
</li>
<li><p class="first">From the terminal, run the <code class="docutils literal notranslate"><span class="pre">hello.py</span></code> program. LOTS of text will follow
the command.</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">(</span>hello-env<span class="o">)</span> $ python hello.py
* Serving Flask app <span class="s2">&quot;hello&quot;</span> <span class="o">(</span>lazy loading<span class="o">)</span>
* Environment: production
WARNING: This is a development server. Do not use it <span class="k">in</span> a production deployment.
Use a production WSGI server instead.
* Debug mode: on
* Running on http://127.0.0.1:5000/ <span class="o">(</span>Press CTRL+C to quit<span class="o">)</span>
* Restarting with stat
* Debugger is active!
* Debugger PIN: <span class="m">722</span>-822-088
</pre></div>
</td></tr></table></div>
<p><em>Mac users</em>:  Remember to use <code class="docutils literal notranslate"><span class="pre">python3</span></code>.</p>
</li>
<li><p class="first">You only need to pay attention to two lines:</p>
<ol class="loweralpha simple">
<li>Line 1 launches the <code class="docutils literal notranslate"><span class="pre">hello.py</span></code> program.</li>
<li>Line 7 tells you that Flask started a server on your machine. It also
shows you the IP address for that server.</li>
<li>In this example, the address is <code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:5000</span></code>. The exact
numbers might be different on your machine, however.</li>
</ol>
</li>
<li><p class="first">Open a new tab in your web browser. Copy/paste the URL into the address
bar.</p>
</li>
<li><p class="first">Ta da! There’s our webpage.</p>
<div class="figure align-default" id="id1">
<img alt="Webpage showing the text, &quot;Hello, Flask!&quot;" src="../../_images/hello-flask.png" />
<p class="caption"><span class="caption-text">Navigate to the IP address shown in the terminal to see the message from your Python code.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
</li>
</ol>
<div class="admonition-note last admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p>If you are using Replit.com remember to run from the shell tab.</p>
<div class="last figure align-default">
<img alt="Showing what running a Flask app in Replit looks like." src="../../_images/repl_flask.png" />
</div>
</div>
</div>
<div class="section" id="change-the-python-code">
<h3><span class="section-number">21.3.2.1. </span>Change the Python Code<a class="headerlink" href="#change-the-python-code" title="Permalink to this headline">¶</a></h3>
<p>Right now, the webpage at <code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:5000</span></code> displays the text <code class="docutils literal notranslate"><span class="pre">Hello,</span>
<span class="pre">Flask!</span></code> This matches the value assigned to the <code class="docutils literal notranslate"><span class="pre">message</span></code> variable in the
Python code. Let’s see what happens when we change this.</p>
<ol class="arabic">
<li><p class="first">Assign a different string to the <code class="docutils literal notranslate"><span class="pre">message</span></code> variable. Save, then refresh
the page in the browser.</p>
</li>
<li><p class="first">Notice that the text on the webpage changes to match. Updating the Python
code affects what we see in the browser! This is what Flask does. It
connects a Python program to a webpage.</p>
</li>
<li><p class="first">Let’s do more. On line 2 in <code class="docutils literal notranslate"><span class="pre">hello.py</span></code>, import the <code class="docutils literal notranslate"><span class="pre">random</span></code> module.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">import</span> <span class="nn">random</span>
</pre></div>
</td></tr></table></div>
</li>
<li><p class="first">Now update the <code class="docutils literal notranslate"><span class="pre">hello()</span></code> function as follows:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
   <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Here&#39;s a random number: </span><span class="si">{0}</span><span class="s2">&quot;</span>
   <span class="n">num</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>   <span class="c1"># Select a random integer from 1 - 25.</span>
   <span class="k">return</span> <span class="n">message</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</li>
<li><p class="first">Save, then refresh the webpage several times. With every refresh, the
<code class="docutils literal notranslate"><span class="pre">hello()</span></code> function runs again, and line 10 assigns a new random number to
<code class="docutils literal notranslate"><span class="pre">num</span></code>. Notice that the message in the browser changes to display the new
number.</p>
<div class="figure align-default">
<img alt="Every time the webpage gets refreshed, a random number gets displayed." src="../../_images/random-message.gif" />
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="add-some-html">
<h2><span class="section-number">21.3.3. </span>Add Some HTML<a class="headerlink" href="#add-some-html" title="Permalink to this headline">¶</a></h2>
<p>Right now, the <code class="docutils literal notranslate"><span class="pre">hello()</span></code> function returns a string, which appears on the
webpage. However, this string value does not have to be simple text. Let’s see
what happens when we include some HTML tags:</p>
<div class="admonition-example admonition">
<p class="first admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<p>Put some <code class="docutils literal notranslate"><span class="pre">h1</span></code> tags around the message in line 9:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;&lt;h1&gt;Here&#39;s a random number: </span><span class="si">{0}</span><span class="s2">&lt;/h1&gt;&quot;</span>
</pre></div>
</td></tr></table></div>
<p>When we save our code and refresh the page in the browser, we will see a
change in the text:</p>
<div class="last figure align-default" id="id2">
<img alt="The message in the webpage now appears as an h1 heading." src="../../_images/string-with-html.png" />
<p class="caption"><span class="caption-text">Nice! We now have an <code class="docutils literal notranslate"><span class="pre">h1</span></code> heading on the page.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</div>
<p>When the <code class="docutils literal notranslate"><span class="pre">hello()</span></code> function returns a string, Flask sends that string to the
browser. Just like we saw with <a class="reference internal" href="../html/html-intro.html#first-html-page"><span class="std std-ref">the first HTML page</span></a> we
built, a browser <em>renders</em> plain text as… plain text. However, by adding HTML
tags to the string, we can tell the browser how we want to structure the page.</p>
<div class="admonition-try-it admonition">
<p class="first admonition-title"><i class="fas fa-puzzle-piece" aria-hidden="true"></i>Try It!</p>
<p>Let’s add a form and a button to our webpage.</p>
<ol class="arabic">
<li><p class="first">Modify the <code class="docutils literal notranslate"><span class="pre">hello()</span></code> function as follows:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
   <span class="n">page</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">      &lt;h1&gt;Here&#39;s a random number: </span><span class="si">{0}</span><span class="s2">&lt;/h1&gt;</span>
<span class="s2">      &lt;form&gt;</span>
<span class="s2">         &lt;button&gt;New Number&lt;/button&gt;</span>
<span class="s2">      &lt;/form&gt;</span>
<span class="s2">   &quot;&quot;&quot;</span>
   <span class="n">num</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
   <span class="k">return</span> <span class="n">page</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</li>
<li><p class="first">Save the code, then refresh the page. Click the <em>New Number</em> button
several times.</p>
</li>
<li><p class="first">Since we include no <code class="docutils literal notranslate"><span class="pre">action</span></code> attribute inside the <code class="docutils literal notranslate"><span class="pre">&lt;form&gt;</span></code> tag,
clicking the button submits the form to the current URL. This causes the
page to refresh and display a new random number.</p>
</li>
</ol>
<p>Note how lines 9 - 14 resemble a simple HTML document. By enclosing the HTML
code in triple quotes (to allow for multiple lines), we can return it from
the function as a single string value.</p>
<p class="last">When the browser receives the results of <code class="docutils literal notranslate"><span class="pre">page.format(num)</span></code>, it ignores
the quotes and renders the HTML code.</p>
</div>
</div>
<div class="section" id="stopping-the-application">
<h2><span class="section-number">21.3.4. </span>Stopping the Application<a class="headerlink" href="#stopping-the-application" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">app.run()</span></code> statement loops continuously. This lets the Flask server wait
for incoming HTTP requests. The program runs in a holding pattern until it
receives a request, then it processes the data and sends back a response.
This wait/receive/respond cycle continues until we deliberately shut it down.</p>
<p>To stop our Flask sever and web application, type <code class="docutils literal notranslate"><span class="pre">Control+c</span></code> in the
terminal. Once done, refreshing the page in the browser results in an
<em>Unable to connect</em> error. The server is off, so requests made to it receive no
response.</p>
<div class="admonition-tip admonition">
<p class="first admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p class="last">Now would be a good time to commit your work to the <code class="docutils literal notranslate"><span class="pre">hello_flask</span></code>
repository.</p>
</div>
</div>
<div class="section" id="video-summary">
<h2><span class="section-number">21.3.5. </span>Video Summary<a class="headerlink" href="#video-summary" title="Permalink to this headline">¶</a></h2>
<p>This video relates to the content on the <a class="reference internal" href="#first-flask"><span class="std std-ref">First Flask App</span></a>
and the <a class="reference internal" href="routes.html#flask-routes"><span class="std std-ref">Routes</span></a> pages.</p>
<section class="vid_box">
   <iframe class="vid" src="https://www.youtube.com/embed/nSqwz99kyLI" frameborder="1" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</section></div>
<div class="section" id="check-your-understanding">
<h2><span class="section-number">21.3.6. </span>Check Your Understanding<a class="headerlink" href="#check-your-understanding" title="Permalink to this headline">¶</a></h2>
<div class="admonition-question admonition">
<p class="first admonition-title"><i class="fas fa-question" aria-hidden="true"></i>Question</p>
<p>In the terminal, how can we tell if a virtual environment is active?</p>
<div class="last"><ol type="a">
   <li><input type="radio" name="Q1" autocomplete="off" onclick="evaluateMC(name, false)"> The command <code class="pre">python --version</code> works.</li>
   <li><input type="radio" name="Q1" autocomplete="off" onclick="evaluateMC(name, true)"> The name of the environment appears before the terminal prompt.</li>
   <li><input type="radio" name="Q1" autocomplete="off" onclick="evaluateMC(name, false)"> A directory for the environment appears in the project's file tree.</li>
   <li><input type="radio" name="Q1" autocomplete="off" onclick="evaluateMC(name, false)"> Global temperatures stabilize because of our new, carefully maintained environment.</li>
</ol>
<p id="Q1"></p></div></div>
</div>
</div>



    
    <nav aria-label="Next and Previous Pages">
      <ul class="pager">
        
        <li class="previous"><a href="install-flask.html"><span aria-hidden="true">&larr;</span> <span class="section-number">21.2. </span>Install Flask</a></li>
        
        
        <li class="next"><a href="routes.html"><span class="section-number">21.4. </span>Routes <span aria-hidden="true">&rarr;</span></a></li>
        
      </ul>
    </nav>
    
    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../../_sources/chapters/flask-intro/first-flask-app.rst.txt"
     rel="nofollow">Page Source</a>
</div>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>