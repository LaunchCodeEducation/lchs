<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>25.2. Database Setup &#8212; LaunchCode&#39;s LCHS  documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/launchcode.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/site.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="25.3. Create the Home Page" href="home-page.html" />
    <link rel="prev" title="25.1. Introduction" href="introduction.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>

  </head><body class="body-bc">

<div id="navbar" class="navbar navbar-default navbar-fixed-top">
   <div class="container">
     <div class="navbar-header">
       <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
       <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
       </button>
       <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
       </a>
       <span class="navbar-text navbar-version pull-left"><b></b></span>
     </div>

       <div class="collapse navbar-collapse nav-collapse">
         <ul class="nav navbar-nav">
           
           
             
           
           
           
           
           
         </ul>

         
           
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
         
       </div>
   </div>
 </div>

<ol class="breadcrumb container">
    <li><a href="../../index.html">Contents</a></li>
    <li><a href="index.html"><span class="section-number">25. </span>Build a Minesweeper Game</a></li>
    <li class="active"><span class="section-number">25.2. </span>Database Setup</li>
</ol>



<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1 content " role="main">

    
  <div class="section" id="database-setup">
<h1><span class="section-number">25.2. </span>Database Setup<a class="headerlink" href="#database-setup" title="Permalink to this headline">¶</a></h1>
<p>The Minesweeper game will use a combination of session cookies and database
operations to store important information. Let’s begin by getting the database
file ready.</p>
<div class="section" id="start-with-an-outline">
<h2><span class="section-number">25.2.1. </span>Start With an Outline<a class="headerlink" href="#start-with-an-outline" title="Permalink to this headline">¶</a></h2>
<p>Before we write any code, we need to think about what data the game needs in
order to work. In particular, we want to identify the information to save in
the game’s database. There are LOTS of possibilities! However, for our basic
game, we want to start small. We can always refine the database structure
later!</p>
<p>Consider the data that needs to <em>persist</em>. For example, if a user leaves the
game in the middle of play and comes back later, what needs to go into the
database to keep a record of their progress?</p>
<p>For starters, our database should save:</p>
<ol class="arabic simple">
<li>Information about each mine hidden on the board. This includes a primary key
value as well as a location (row letter plus column number).</li>
<li>Information about each individual cell on the board. This includes a primary
key, the cell’s location, the number of mines in surrounding cells, whether
the user has clicked the cell, and whether the cell contains a mine.</li>
</ol>
<p>This outline suggests 2 tables for the database - one for a list of mines, and
another for the cells on the game board.</p>
</div>
<div class="section" id="db-setup-py">
<h2><span class="section-number">25.2.2. </span><code class="docutils literal notranslate"><span class="pre">db_setup.py</span></code><a class="headerlink" href="#db-setup-py" title="Permalink to this headline">¶</a></h2>
<p>Use the tools in Visual Studio code to create a new Python file at the same
level as <code class="docutils literal notranslate"><span class="pre">main.py</span></code>. Call the new file <code class="docutils literal notranslate"><span class="pre">db_setup.py</span></code>. This will be a
separate program, and its only job is to create the database file and add two
tables.</p>
<p>Follow along with the video to build this program.</p>
<div class="admonition-tip admonition">
<p class="first admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p>The video player automatically sets the resolution. However, this choice
might not be good enough to clearly see all of the text.</p>
<p class="last">If the code looks blurry on your screen, click the gear icon in the video
controls and increase the resolution to the maximum value.</p>
</div>
<section class="vid_box">
   <iframe class="vid" src="https://www.youtube-nocookie.com/embed/WGB6Pj1mTvw" frameborder="1" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</section><div class="admonition-note admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p class="last">For our basic game, we might not use all of the columns in the tables yet.
However, they could be useful later, so there’s no harm in adding them now.</p>
</div>
</div>
<div class="section" id="video-summary">
<h2><span class="section-number">25.2.3. </span>Video Summary<a class="headerlink" href="#video-summary" title="Permalink to this headline">¶</a></h2>
<div class="admonition-tip admonition">
<p class="first admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p>Don’t try to code <code class="docutils literal notranslate"><span class="pre">db_setup.py</span></code> using only the summary! The clip contains
information and specific code instructions that you really shouldn’t skip.</p>
<p class="last">The text by itself doesn’t provide enough detail on its own. It’s a
<em>SUMMARY</em> and not a <em>GMESD</em> (Give-Me-Every-Single-Detail).</p>
</div>
<ol class="arabic">
<li><p class="first">After creating the <code class="docutils literal notranslate"><span class="pre">game.db</span></code> database file, add two new tables: <code class="docutils literal notranslate"><span class="pre">mines</span></code>
and <code class="docutils literal notranslate"><span class="pre">board</span></code>. The first table stores an ID number and location for each
mine created in the game. The second table stores information about each
cell on the game board.</p>
</li>
<li><p class="first">Adding <code class="docutils literal notranslate"><span class="pre">DROP</span> <span class="pre">TABLE</span></code> commands at the top of the file lets us quickly remove
and recreate the two tables. This is useful if we need to make a fresh
start.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">mines</span></code> table includes two columns: <code class="docutils literal notranslate"><span class="pre">mine_id</span></code> and <code class="docutils literal notranslate"><span class="pre">coordinates</span></code>.
<code class="docutils literal notranslate"><span class="pre">mine_id</span></code> is the primary key, and its data type must be <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code> instead
of <code class="docutils literal notranslate"><span class="pre">INT</span></code>. (For some reason, using the <code class="docutils literal notranslate"><span class="pre">INT</span></code> syntax doesn’t automatically
increment the primary key values).</p>
<p><code class="docutils literal notranslate"><span class="pre">coordinates</span></code> is of type <code class="docutils literal notranslate"><span class="pre">TEXT</span></code> and will store values like <code class="docutils literal notranslate"><span class="pre">C9</span></code> or
<code class="docutils literal notranslate"><span class="pre">E2</span></code>.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">board</span></code> table includes columns for <code class="docutils literal notranslate"><span class="pre">cell_id</span></code> (the primary key),
<code class="docutils literal notranslate"><span class="pre">coordinates</span></code>, <code class="docutils literal notranslate"><span class="pre">surr_mines</span></code> (surrounding mines), <code class="docutils literal notranslate"><span class="pre">guessed</span></code> and
<code class="docutils literal notranslate"><span class="pre">mine_id</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">cell_id</span></code>, <code class="docutils literal notranslate"><span class="pre">surr_mines</span></code>, and <code class="docutils literal notranslate"><span class="pre">mine_id</span></code> are integers. <code class="docutils literal notranslate"><span class="pre">coordinates</span></code>
is a text data type, and <code class="docutils literal notranslate"><span class="pre">guessed</span></code> is a boolean.</p>
</li>
<li><p class="first">No rows need to be added to the <code class="docutils literal notranslate"><span class="pre">mines</span></code> table at this time. However, the
<code class="docutils literal notranslate"><span class="pre">board</span></code> table <em>does</em> require some information.</p>
</li>
<li><p class="first">A pair of nested loops create a string value for the coordinates of each cell
on the board.</p>
</li>
<li><p class="first">The loops also execute a SQL query to insert new rows into the <code class="docutils literal notranslate"><span class="pre">board</span></code>
table. Each new row includes a string for <code class="docutils literal notranslate"><span class="pre">coordinates</span></code> and the value
<code class="docutils literal notranslate"><span class="pre">False</span></code> for the <code class="docutils literal notranslate"><span class="pre">guessed</span></code> column.</p>
</li>
<li><p class="first">Note the unused row and column labels (<code class="docutils literal notranslate"><span class="pre">X,</span> <span class="pre">Y,</span> <span class="pre">0</span></code>, and <code class="docutils literal notranslate"><span class="pre">11</span></code>). There is a
reason for these extra labels, but we won’t explore that until the
<a class="reference internal" href="game-functions.html#check-surroundings-walkthrough"><span class="std std-ref">end of the chapter</span></a>.</p>
</li>
</ol>
</div>
</div>



    
    <nav aria-label="Next and Previous Pages">
      <ul class="pager">
        
        <li class="previous"><a href="introduction.html"><span aria-hidden="true">&larr;</span> <span class="section-number">25.1. </span>Introduction</a></li>
        
        
        <li class="next"><a href="home-page.html"><span class="section-number">25.3. </span>Create the Home Page <span aria-hidden="true">&rarr;</span></a></li>
        
      </ul>
    </nav>
    
    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../../_sources/chapters/databases-part2/db-setup.rst.txt"
     rel="nofollow">Page Source</a>
</div>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>